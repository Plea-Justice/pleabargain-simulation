<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Text Test</title>

    <script src="https://code.createjs.com/createjs-2015.11.26.min.js"></script>
    <script>
      function init() {
	var currentFPS = 24;
        var canvas = document.getElementById("TextCanvas");
        var stage = new createjs.Stage(canvas);
        createjs.Ticker.addEventListener("tick", tick);
	createjs.Ticker.timingMode = createjs.Ticker.RAF_SYNCHED;
	createjs.Ticker.setFPS(currentFPS);

	var inputString = "Hello everybody,~~ this text can totally be changed!~~~ Wow, Thomas just needs to build some library systems to hold all of this jive,~~~ then clean up how these function hooks work.";
        var displayText = new createjs.Text("", "24px Arial", "#777");
        displayText.textAlign = "left";
        displayText.lineWidth = "350";

        stage.addChild(displayText);

        displayText.x = 350;
        displayText.y = 25;



	var shape_1 = new createjs.Shape();
	shape_1.graphics.f().s("#000000").ss(1,1,1).p("AL+qWQglgTgygOQgggKg6gMQiTgchlgBQiIgBhnAtAk4q9QibhAi7ASQhJAHgmAYIANAAAnLmHQAKAFAHADQASAKAMALQALAMAJAUQAEAJAJAcQANAoAMAeQABAAACgBQAEgCABgFQABgFgEAAApAmqQgkAngOAtQgTA2AYAiQAIANAVANQAkAWAfAAQASABARgHQASgHALgOQAHgJAFgPQAFgRADgJQAGgcAEgNQADgPgBgEQgBgHgJgMIgUgdApAmqQAUABAZAGQASAGAkAOQAKAEAIAEArilrQAWgLAlgTQAcgPARgGQAZgKAWgCQAFAAAGAAAr3lhQAIgEANgGArjlzQAAAEABAEQAEAhAWAfQAWAfAjAYQBDAsBTAFQBQAFBHghAj8BmQAHAJAGASQAGAVAEAHQAHALAYAVQAVASAFAPQACAOgGAEQgDACgHAAIgZAAQgKABgGAAQgJAAgGgCQgOgCgLgIQgMgEgHgHQgOgSANgjAHHmeQAFABAEABQAaAHAnAdQAjAZBIA0Qg/AyglAWQg6Ajg2AJQgRACgYABQgcgBgOAAQgugCgYgIQgPgEgmgUQgcgOgUgEQAahCA6gxQBDg5BTgLQAWgBAIAAQAMABAJACgAFBmCQgTAHgJAPQgCAEgHAXQgHAgABANQAEAyBDAkQARAKAMADQAYAEAagNQAXgMARgWQAXgeAGgnQAHgngMgjQgFgOgIgFQgBgBgPgDQgEgCgCgEQgCgDAAgDAC/lzQAegaAWgMQAfgUAggCIADAKACqjpQgDgBgDAAACijRQADgMAFgMAhwCOQAEAAAMgDQAJgCAGAAQAJACANAJQAPAMAHACAjeK0QASAnAyAOQAjAKAmgFQAkgEAhgTAjdHyQABAAAzgJQA7gKA7ACQA8ACAmAYQAWAQAMAZQAMAagHAXQgEgCgCgEQgBgFACgEQgPAJgVAEQgLACgbACQgzADg6AAQg3ADgmgFQgmgFgNgSQgBgBgCgDQABgBAAAAQACgHgDgEQgBgFgFgFIgGgKQgFgFgKgFQgMgGgCgBIgKgKQgDgCgIAAQgIgBgCgCQAPgDAagHQAPgCARAEQADgBACAAQALgBALgBg");
	shape_1.setTransform(152.9,164.6);

	var shape_4 = new createjs.Shape();
	shape_4.graphics.f().s("#000000").ss(1,1,1).p("ABorBQCgg5CtAHQCuAHCbBFAk6quQg8gjhEgRQhEgRhFACQhaAEhQAmQgIADgIAEAommXQgjAKgOANQgTAVgDA0QgCAcADAMQAIAVAZAUQAaAYAUAFQATAEAUgHQATgGAQgOQAbgWAFgZQAEgUgJgXQgLgkgcgcQgIgIgFADAommXQAqAFAkAVQAuAbAWArQABACAUAtQAMAbAPANAlsjcQgpAag7AFQgsADg/gKQgjgHgTgFQgegJgUgOQgcgUgWglQgNgWgVgyQBpg3BXAGQAJABAIABAh/CRQABAAAMgCQAIgCAFABQAGAAAGACIAdALQgCADAAABQALACAEgBAkGBuQAAAZAMAPQAGAHAJAIQAFAFAKAIQALAJAKARQAKARgFALQgDAOgRAEQgJADgSgDQgagFgbgQQgFgEgCgDQgEgEgBgFQgCgFACgGQADgIABgEAFBmDQACgBADgBQAygUAvAEQAFAAAEABACnjgQA+AvBOACQAsACAwgMQB8gbBqhOAFBmDQgVAPgMAWQgLAXgBAaQgBAYAKAYQAKAXATAQQAWAUAbABQAQAAARgGQAVgHASgQQASgPAKgVQAYgrgOgtQgCgIgIgUQgPgVgQgJQAyAFA0AgQAqAaA1AzQAEgDAEgDACZjQQAShIBEg6QAnggArgRAC6lmQAHgRATgOQAMgKAYgOQAOgIAHADAiaIbQAQAAAMgCQADAAADgBQAXgEAqgIQASgCAPACQAMACALADQAEABAFACQAUAGAXAKQAKAEAIAEQAHAIAFAJAiaIbQASgDAagGQAtgLAdADQAGABAIABAjiIQQADABADAAQAIABAHABQAQAAAPgBQAIAAAHgBQALgBAqgIQAggGAUAAQAnAAAgAPAAHIKQACgBAJADIAkAVQAIADAEAEQACACADACQAXANAFAQQgZAEgyAFQiAAPhCgBQgbgBgQgEQgPgDgLgHIAAAAQAAgDgBgCAkBKoQAgAqAyAUQAzAUA0gIQALgBApgLQAegIAVAAAkHIZQgCAAgCAAQgFgBgFAAQgBAAAAAAQgCAAgDAAQgCAAgBAAQgHAAgFgBQgCAAgCgBQgBAAgBAAQADABADAAQAEAAAFAAQAGAAAGgBQAAAAABAAQACAAACAAQAHAAAGAAQABAAAAAAQACgBABAAQADAAADgBQABAAAAAAQACgBABAAQAMgCAHgBAkWIYQgCAAgCAAQgDAAgEgBAkVIYQACAAABgBQAFAAAKgBAkbIWIAGAAAkoIWQAEABADAAAkwIVQAAAAABgBQACABABAAQACAAACABQAGAAAHAAAkxIWQAAgBABAAQADABAFAAAkwIWQAAAAgBAAQgCgBgDAAQACAAAEAAAkvIUQAFgDAFAAQABAAALABQAQADAKgBQACAAAEgBQABAAAAABAk1IcQAGACAJAHQAGAFAOAPQAMAMANAHQADACAEACAkyIZQAEADAEAEQABABABAAQABACALAIQAIAGAEAEQALAMACABQACABADABAkyIZQAQgBAXABQAFAAAFAAQAFgBAHABQAMABAMAAQAoACAbgBAksIVQAJABAIAAAj1IZQAHACAIADQABAAABAAAjiIVQAGAAAIABIAFAAQACAAADAAAj8IVIACAAIAAAAQAKgBAOABAkDIaQABgBABAAAj/IVQACAAABAAAkCIWQADgBADAAAj6IVIAYAAAkCIWQAXgBAXABAk9IQQARgBAhgDQAMAAAdAEAkUIWQANgBAIAAAjVIhQAMABAQgCQAJAAAWgFAk2IVQgBgBgBAAIAAACQACABAEACAjvJRQgBAAgCgBQACAAABABQAOAGAPABAk8IaQAEAAAGgB");
	shape_4.setTransform(153.9,163.8);

	var shape_5 = new createjs.Shape();
	shape_5.graphics.f("#5e2929").s().p("AhRAfQgcgBgTgIQgHgDgGgFIgIgHIgPgRQgJgLgMACIgIgHIAIgBIARAAIAAAAIAAAAIAGAAIAIAAIgIAAIgGAAIAAAAIAAAAIgRAAIgIABIgHgDIAAgDIACABIAFABIACABIAGABIALAAIAEAAIAEAAIABAAIALABIAEABIAEAAIAMACIASADQAHACAJAAIAFABQAeADAvgGQA/gIANAAQArgEAjAKQAkAKAXAVIAGAGQhjALgrAEQgyAEgqAAIgwgCgAi5gcIAAAAgAi/gdIABAAIAFABIgGgBgAi/gdIAAAAg");
	shape_5.setTransform(142.6,220.3);

        var shape_18 = new createjs.Shape();
	shape_18.graphics.f().s("#000000").ss(1,1,1).p("Awb3rQgFgMgIgOQgMgWgsg/Qglg0gMggQgTgvAMgqQALgnAmghQAcgYAxgYQDfhwEiguQDoglEzABQDiABCuAWQDWAcCtBAQDFBJCYB8QCkCGBTCtQBsDdgTEoQgODnhgErQgMAohJDYQg1CcgdBjQhUEqAGDkQAFC4BLBmQAvBABKAbQBNAcBEgdQBGgdAUhTQACgYACgYQgCg1gqghAK5nFQAghhAQhnAK5nFQAlgrAhgyQCGjIASjnQALCqgyC8QgoCVhYDBQgBABikFOQhjDLgxCLQhkEgAsDcQAZCDBPBoQApA3AyAmQAyAnA8AVQB8AtCBgwQCAgvAxhtQACgFADgFACb1sQAyBgByCmQB8CyAvBkQBMCigKCjQgLC3h2BkQCbhPBziGAYXMmQACgSABgSAReRxQABAEACAEQADAEADADQAMALATAFQAjAJAIACQAYAFATAAQAiABAqgNQAagIAvgVQAlgRAUgMQAegTASgWQAJgMAIgQQBDgGBOAnQAzAbBTBAQA+AwAdAfQAuAxARAzQAPAtgGA8QgEAjgQBIQgkCahXFuAJCTUQADgGADgGARhR5QgnCMhmB7QhcBwiGBWQhvBKibBAQheAni7BBAGbApQh5CwhPDKQhUDXgdDiQgNBqAGBNQAHBjAoBKQAbAzArAoQAqAoA1AYQA+AbAxgIQA3gJAug0QAdghAig8AXrQVQAEgJADgKQAGgRAHgiQAMg7AIg+QAAgBAAAAQAFgZgBgWAXlQVQADAAADAAAvn6eQALglAjghQAWgWAvgfQBnhEBBgbQBjgpBUAOQApAGA3AYQAfANA+AcQAdAMBHAYQBAAUAjARQA0AZAjAjQApAoANAwApD4qQAYA1AoAtQAsAyA5AfQAzAcBDARQA0AMBJAIQB7ALB1gFQAjgCASAAQAeABAWAJQALADAHAGQAJAHACAKAvd3/QAAgjATgfQAYgoAygaQAxgYA3gDQA6gCAuAYQA7AgAyA+Awb3rQAGArgEAsQAAADgBACQAAACAAABQgBAIAAAHAvZ3kQgDgOgBgNQhtGDAPGUQALEZBKDyQA0CuBSCPQABABAAACQAHDAhKC4QhLC7iLCIQhPBNhXAmQhmArhZgXQhNgWhFhHQgwgzg6heQAMCLArBvQAyCABZBRQBiBYCFANQCMAOBfhPQgJAuAgArQAfApAxAPQApANA3gEQAigDBAgMQhGgugZhbQgYhVAWhZQAMgxAbg2QANgbAQgcQAUgiBMhvQA9hYAeg8QAmhMAKhGQAAgBAAgBQAtAcAtAOQBDAVBOgEQBngGB6gwQE4h5DlkGQASgVASgUQCrjRBPj0AwM2pQAAgfgPgjQgFglgNgkAwP1TQgJglgCgUApI42QADAGACAGA6jO/Qg0BBggBNQghBOgKBRQg7HFhJGCAGrATQgIALgIALAtfBjQAtBOA1BHQBVByBaA5AljHeIAEE+QAAA3gIAbQgQAugyAjQgjAYhAAZAljHaIAAAEAqyO6QgqCqASCxQASCxBLCdQBLCeCAB8QB/B9CeBIApWOyQgvAGgsgBQhcgChJgiQgLgFgLgGApWOyQgNgZgDgfQgCgXACgkQAFiCAeiOAlpNdQgvAjhXAcQg1APgyAH");
	shape_18.setTransform(176.5,215.9);

        stage.addChild(shape_18);
	stage.addChild(shape_1);
	//stage.addChild(shape_4);

        var stringIndex = 0;

        function tick() {
          var advancableIndex = false;
          while (!advancableIndex) {
            if (stringIndex >= inputString.length) {
	      advancableIndex = true;
	      stage.addChild(shape_1);
              stage.removeChild(shape_4);
              stage.removeChild(shape_5);
	      break;
	    }
            else {
  	      switch (inputString[stringIndex]) {
		//advancable indexes append just the character before advancing frame buffer
  	        case '~':
                  stringIndex++;
		  advancableIndex = true;
                  break;
  	        case '.':
  	          displayText.text = displayText.text + inputString[stringIndex++];
		  advancableIndex = true;
		  stage.addChild(shape_1);
                  stage.removeChild(shape_4);
                  stage.removeChild(shape_5);
		  break;
  	        case ',':
  	          displayText.text = displayText.text + inputString[stringIndex++];
		  advancableIndex = true;
		  stage.addChild(shape_1);
                  stage.removeChild(shape_4);
                  stage.removeChild(shape_5);
		  break;
  	        case '!':
  	          displayText.text = displayText.text + inputString[stringIndex++];
		  advancableIndex = true;
		  stage.addChild(shape_1);
                  stage.removeChild(shape_4);
                  stage.removeChild(shape_5);
		  break;
  	        case '?':
  	          displayText.text = displayText.text + inputString[stringIndex++];
		  advancableIndex = true;
		  stage.addChild(shape_1);
                  stage.removeChild(shape_4);
                  stage.removeChild(shape_5);
		  break;
  	        case ';':
  	          displayText.text = displayText.text + inputString[stringIndex++];
		  advancableIndex = true;
		  stage.addChild(shape_1);
                  stage.removeChild(shape_4);
                  stage.removeChild(shape_5);
		  break;
  	        case ':':
  	          displayText.text = displayText.text + inputString[stringIndex++];
		  advancableIndex = true;
		  stage.addChild(shape_1);
                  stage.removeChild(shape_4);
                  stage.removeChild(shape_5);
		  break;
  	        case '\\':
  	          displayText.text = displayText.text + inputString[stringIndex++];
		  advancableIndex = true;
		  stage.addChild(shape_1);
                  stage.removeChild(shape_4);
                  stage.removeChild(shape_5);
		  break;
  	        case '-':
  	          displayText.text = displayText.text + inputString[stringIndex++];
		  advancableIndex = true;
		  stage.addChild(shape_1);
                  stage.removeChild(shape_4);
                  stage.removeChild(shape_5);
		  break;
		//non-advancable indexes: keep appending text until an advancable is reached
  	        case ' ':
  	          displayText.text = displayText.text + inputString[stringIndex++];

		  advancableIndex = true;
		  stage.addChild(shape_1);
                  stage.removeChild(shape_4);
                  stage.removeChild(shape_5);
		  break;
  	        case '\"':
  	          displayText.text = displayText.text + inputString[stringIndex++];
		  break;
  	        case '\'':
  	          displayText.text = displayText.text + inputString[stringIndex++];
		  break;
		default:
		  displayText.text = displayText.text + inputString[stringIndex++];
		  advancableIndex = true;
	          stage.addChild(shape_5);
	          stage.addChild(shape_4);
	          stage.removeChild(shape_1);
         	  break;
              }
            }
          }
	  //render new frame
          stage.update();
        }

      }
    </script>
  </head>
  <body onload="init();">
    <canvas id="TextCanvas" width="800" height="300"></canvas>
  </body>
</html>
